{
  "hash": "479e7a7a5aa14ccf15b527f4a4004854",
  "result": {
    "markdown": "# KW 40 - KW 42: Felderhebung\n\n## Einführung und Installation\n\nEs gibt eine Vielzahl an möglichen Methoden zur Erfassung der Besuchszahlen. Automatische Zählgeräte bieten die Möglichkeit lange und durchgehende Zeitreihen zu erfassen. Inputs dazu, wie diese ausgewertet werden können, erhält ihr in dieser Aufgabe.\n\n\n![](images/gruental.jpg){width=50%}\n\n## Ziele\n\n- Die Studierenden können das eingesetzte Zählgerät installieren und kennen die Vor- und Nachteile verschiedener Methoden.\n\n- Die Studierenden können die Daten auslesen und explorativ analysieren.\n\n## Grundlagen\n\nDie Geräte werden innerhalb der unten eingezeichneten Elipsen platziert. Damit soll überprüft werden, wie stark frequentiert die Waldränder der ökologisch aufgewerteten Seeparzelle sind.\n\n![](images/Perimeter_Felderhebung.png){width=50%}\n\nDatenschutz ist ein wichtiges Thema. Die Besuchenden werden über den Zweck der Kameras informiert, die Daten nach der Bearbeitung wieder gelöscht und nicht weitergegeben.\n\n![](images/Begleitzettel_Kamera.png){width=50%}\n\n## Auswertung\n__AUFGABE ab dem 17. 10. 2022__\n\n_Nachdem die Kameras für zwei Wochen im Einsatz standen, sichten wir zusammen die Ergebnisse._\n\n_Da die Anzahl Passagen auf der Seeparzelle keine schöne Auswertung erlauben, arbeiten wir ab jetzt mit einem Datensatz aus dem WPZ. Die Vorteile für euch sind:_\n\n1. ihr habt genügend Daten für die Auswertung mit R und \n2. die Daten sind im selben Format wir für die späteren Aufgaben.\n\n### Aufgabe 1: Vorarbeiten\n\n- Überlegt euch mögliche Darstellungsformen für die __Anzahl Passagen__ und die beobachteten __Aktivitäten__ an den untersuchten Standorten.\n\n- Skizziert eure Ideen mittels Stift und Papier.\n \n\n### Aufgabe 2: Darstellung in R\n\nR bietet sehr viele Optionen zur Analyse und zur Darstellung der Daten. Nehmt bitte den bereitgestellten Datensatz zur Hand und visualisiert eure Ideen mit R. \n\nUntenstehend sind einige Ideen zur Umsetzung.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### Bibliothek laden\n\n# zuerst muss sie installiert sein:\n# install.packages(\"tidyverse\")\nlibrary(tidyverse) # Arbeiten mit Datumsformaten\n\n### Datensatz einlesen\n\n# dabei speichere ich ihn gleich unter der Variable \"depo\" ab.\ndepo <- read.csv(\"datasets/fallstudie_s/Felderhebungen/Bsp_Data.csv\", sep = \";\")\n\n### Datum und Uhrzeit\n# das Datum und die Uhrzeit sind in einer Spalte. R liest das als \"Buchstaben\" ein. Wir definieren es als Datum:\ndepo$DatumUhrzeit <- as.POSIXct(depo$DatumUhrzeit, format = \"%d.%m.%Y %H:%M\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n### Kennzahlen\n\n#zuerst schaue ich mir jeweils den Aufau und die Kennzahlen zum Datensaz an:\nstr(depo)\n\n# hat es im Datensatz noch fehlende Werte?\nsum(is.na(depo))\n\n# wie viele Personen sind IN das Gebiet gegangen?\nsum(depo$Fuss_IN)\n\n# wie viele insgesamt?\n# dafür erstellen wir zuerst eine neue Spalte mit der Totalen Anzahl pro Datum und Zeitstempel:\ndepo$Total = depo$Fuss_IN + depo$Fuss_OUT + depo$Velo_IN + depo$Velo_OUT\n# und berechnen nachher die Summe dieser neuen Spalte\nsum(depo$Total)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Darstellen der Anzahl Passagen pro Stunde und Tag\nplot(x = depo$DatumUhrzeit, y = depo$Total,\n     pch = 21,  # Form\n     cex = 1.5, # Grösse\n     bg=\"blue\") # Füllung\n```\n\n::: {.cell-output-display}\n![](2_Felderhebung_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Darstellung der verschiedenen Nutzergruppen\nslieces <- c(sum(depo$Fuss_IN), sum(depo$Fuss_OUT), sum(depo$Velo_IN), sum(depo$Velo_OUT))\nlbls <- c(\"Fuss_IN\", \"Fuss_OUT\", \"Velo_IN\", \"Velo_OUT\") \npie(slieces, labels = lbls)\n```\n\n::: {.cell-output-display}\n![](2_Felderhebung_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n### Aufgabe 3: für Fortgeschrittene\n\nDie Anzahl Passagen pro Zählstelle können nicht nur als statische Diagramme dargestellt werden. R ist auch ein GIS! Hier seht ihr, wie mit R interaktive Karten gestaltet werden können.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# zuerst berechnen wir mit der Bibliothek tidyverse das Total pro Standort\ntotal_Standort <- depo |> \n  group_by(Standort, lon, lat) |> \n  summarise(Total = sum(Total))\n\n# dann überführen wir den Datensatz in ein räumliches Format \n# (Hinweis: dafür muss die Bibliothes \"sf\" installiert sein)\ntotal_Standort <- sf::st_as_sf(total_Standort, \n                         coords = c(\"lon\", \"lat\"),\n                         crs = 2056)\n\n# Transformiere die CH1903 Koordinaten in WGS84\ntotal_Standort <- sf::st_transform(total_Standort, crs = 4326)\n\n# Plotte nun eine interaktive Karte\n# install.packages(\"tmap\")\nlibrary(tmap)\n\n# setze den Modus auf Interaktiv\ncurrent.mode <- tmap_mode(\"view\") \n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# plotte\ntm_basemap(server = c(Topo = \"Esri.WorldTopoMap\",\n                      Ortho = \"Esri.WorldImagery\",\n                      OSM = \"OpenStreetMap.HOT\"))+\n  tm_shape(total_Standort)+\n  tm_bubbles(size = \"Total\", border.col = \"black\", col = \"red\", scale = 5, alpha = 0.5)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"leaflet html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-963878fea329d82e4c73\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-963878fea329d82e4c73\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"createMapPane\",\"args\":[\"tmap401\",401]},{\"method\":\"addProviderTiles\",\"args\":[\"Esri.WorldTopoMap\",null,\"Topo\",{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"Esri.WorldImagery\",null,\"Ortho\",{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addProviderTiles\",\"args\":[\"OpenStreetMap.HOT\",null,\"OSM\",{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"pane\":\"tilePane\"}]},{\"method\":\"addCircles\",\"args\":[[47.2712795810781,47.2581091207004],[8.55676710220104,8.55223684094175],[122.04088952086,85.8356922642551],[\"Sihlufer\",\"Sihlwald\"],\"total_Standort\",{\"interactive\":true,\"className\":\"\",\"pane\":\"tmap401\",\"stroke\":true,\"color\":\"#000000\",\"weight\":1,\"opacity\":0.5,\"fill\":true,\"fillColor\":[\"#FF0000\",\"#FF0000\"],\"fillOpacity\":[0.498039215686275,0.498039215686275]},[\"<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\\/style><div style=\\\"max-height:25em;padding-right:0px;\\\"><table>\\n\\t\\t\\t   <thead><tr><th colspan=\\\"2\\\"><b>Sihlufer<\\/b><\\/th><\\/thead><\\/tr><tr><td style=\\\"color: #888888;\\\"><nobr>Total<\\/nobr><\\/td><td align=\\\"right\\\"><nobr>188<\\/nobr><\\/td><\\/tr><\\/table><\\/div>\",\"<style> div.leaflet-popup-content {width:auto !important;overflow-y:auto; overflow-x:hidden;}<\\/style><div style=\\\"max-height:25em;padding-right:0px;\\\"><table>\\n\\t\\t\\t   <thead><tr><th colspan=\\\"2\\\"><b>Sihlwald<\\/b><\\/th><\\/thead><\\/tr><tr><td style=\\\"color: #888888;\\\"><nobr>Total<\\/nobr><\\/td><td align=\\\"right\\\"><nobr>93<\\/nobr><\\/td><\\/tr><\\/table><\\/div>\"],null,[\"Sihlufer\",\"Sihlwald\"],{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null,null]},{\"method\":\"addLayersControl\",\"args\":[[\"Topo\",\"Ortho\",\"OSM\"],\"total_Standort\",{\"collapsed\":true,\"autoZIndex\":true,\"position\":\"topleft\"}]}],\"limits\":{\"lat\":[47.2581091207004,47.2712795810781],\"lng\":[8.55223684094175,8.55676710220104]},\"fitBounds\":[47.2581091207004,8.55223684094175,47.2712795810781,8.55676710220104,[]]},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nInteraktive Karte von zwei ausgewählten Zählstellen im Untersuchungsgebiet mit fiktiven Besuchszahlen.",
    "supporting": [
      "2_Felderhebung_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\n<script src=\"../site_libs/jquery-1.12.4/jquery.min.js\"></script>\n<link href=\"../site_libs/leaflet-1.3.1/leaflet.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/leaflet-1.3.1/leaflet.js\"></script>\n<link href=\"../site_libs/leafletfix-1.0.0/leafletfix.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/proj4-2.6.2/proj4.min.js\"></script>\n<script src=\"../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js\"></script>\n<link href=\"../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/leaflet-binding-2.1.2/leaflet.js\"></script>\n<script src=\"../site_libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js\"></script>\n<script src=\"../site_libs/leaflet-providers-plugin-2.1.2/leaflet-providers-plugin.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}