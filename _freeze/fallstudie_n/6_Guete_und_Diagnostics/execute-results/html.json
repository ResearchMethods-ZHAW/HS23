{
  "hash": "49b58abdbd66c41c50c946175d85b324",
  "result": {
    "markdown": "---\nexecute:\n  echo: false   # set to true to show musterlösung\n  output: false # set to true to show musterlösung\ncode-fold: true\ncode-summary: \"Musterlösung\"\nknitr:\n  opts_chunk: \n    collapse: true\n---\n\n\n# 6. Modellgüte und -diagnostics MM / Habitatselektionsmodell\n\n## Libraries laden\n\nNeue packages die wir für die Modelle und die Diagnostics brauchen\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nlibrary(\"lme4\")\nlibrary(\"bbmle\")\nlibrary(\"MuMIn\")\nlibrary(\"tidyverse\")\nlibrary(\"DHARMa\")\nlibrary(\"car\")\nlibrary(\"MASS\")\nlibrary(\"ROCR\")\nlibrary(\"sjPlot\")\nlibrary(\"ggeffects\")\nlibrary(\"sjstats\")\nlibrary(\"cowplot\")\nlibrary(\"magrittr\")\nlibrary(\"gstat\")\n```\n:::\n\n\n## Ausgangslage\n\n- Der Modellfit von letzter Woche als Ausgangspunkt für die heutige Übung \n\nHier sollte investiert werden. Backscale Estimates, Modelldiagnostik aufmöbeln, \n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\n\nDF_mod_day <- read_delim(\"fallstudie_n/data/Aufgabe4_Datensatz_Habitatnutzung_Modelle_20221031_moodle.csv\", \n                     delim = \";\") |>\n  filter(time_of_day == \"day\") |>\n  mutate(slope_scaled = scale(slope),\n         us_scaled = scale(us),\n         os_scaled = scale(os),\n         forest_prop_scaled = scale(forest_prop),\n         dist_road_all_scaled = scale(dist_road_all),\n         dist_road_only_scaled = scale(dist_road_only),\n         dist_build_scaled = scale(dist_build),\n         id = as.factor(id))\n## Error: 'fallstudie_n/data/Aufgabe4_Datensatz_Habitatnutzung_Modelle_20221031_moodle.csv' does not exist in current working directory ('/workspaces/Unterrichtsunterlagen').\n\nf <- pres_abs ~\n  slope_scaled +\n  us_scaled +\n  os_scaled +\n  forest_prop_scaled +\n  dist_road_only_scaled +\n  dist_build_scaled\n\nf <- paste(c(f, \"+ (1 | id)\"), collapse = \" \") |> as.formula()\n\nm_day <- glmer(f, data= DF_mod_day, family = binomial, na.action = \"na.fail\")\n## Error: bad 'data': object 'DF_mod_day' not found\n\nall_m <- dredge(m_day)\n## Error in nobs(global.model): object 'm_day' not found\n\navgmodel <- model.avg(all_m, rank=\"AICc\", subset = delta < 2)\n## Error in model.avg(all_m, rank = \"AICc\", subset = delta < 2): object 'all_m' not found\nsummary(avgmodel)\n## Error in h(simpleError(msg, call)): error in evaluating the argument 'object' in selecting a method for function 'summary': object 'avgmodel' not found\n```\n:::\n\n\n- Die Modellresultate aus dem avgmodel sind grundätzlich die finalen Resultate die bereits interpretiert werden könnten. Allerdings funktionieren die Diagnosetests und die Darstellung der Resultate mit diesem gemittelten Modell nicht sehr gut, weshalb wir einen re-fit mit glmer machen müssen (an den Resultaten ändert sich dadurch nichts) \n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\n\n# hier zum Vergleich, dass die Resulate sich nur marginal verändern \n\nsummary(avgmodel)\n## Error in h(simpleError(msg, call)): error in evaluating the argument 'object' in selecting a method for function 'summary': object 'avgmodel' not found\nsummary(m_day)\n## Error in h(simpleError(msg, call)): error in evaluating the argument 'object' in selecting a method for function 'summary': object 'm_day' not found\n```\n:::\n\n\n## Aufgabe 1\n\nBerechung der AUC (area under the receiver operating characteristic curve) **= Mass der Modellgüte**\n\nFür die Berechnung des AUC findet ihr weiterführende Informationen unter: [Link](https://www.wsl.ch/staff/niklaus.zimmermann/programs/progs/simtest.pdf) \n\n\n::: {.cell}\n\n```\n## Error in h(simpleError(msg, call)): error in evaluating the argument 'object' in selecting a method for function 'predict': object 'm_day' not found\n## Error in is.data.frame(predictions): object 'prob' not found\n## Error in performance(pred, measure = \"auc\"): object 'pred' not found\n## Error in eval(expr, envir, enclos): object 'auc' not found\n```\n:::\n\n\n## Aufgabe 2\n\nInterpretieren der Modell-Residuen mittels Tests auf verschiedene Aspekte\n\n- Model testing for over/underdispersion, zeroinflation and spatial autocorrelation following the DHARMa package.\n- unbedingt die Vignette des DHARMa-Package konsultieren: [Link](https://cran.r-project.org/web/packages/DHARMa/vignettes/DHARMa.html)\n\n\n::: {.cell}\n\n:::\n\n\n## Aufgabe 3\n\nGraphische Darstellung der Modellresultate\n\n\n::: {.cell}\n\n:::\n\n\n## Aufgabe 4\n\nErmittlung des individuellen Beitrags der einzelen Variablen im Gesamtmodell\n\n- Bestimmen delta AIC nach Coppes et al. 2017 → Vergleich des Gesamtmodells gegenüber einem Modell ohne die entsprechende Variable.\n- Auftrag auf den 21.11.2022: Kurze Vorstellung der Modellresultate & Diagnostics im Plenum und Diskussion der Ergebnisse (keine PP-Präsentation nötig)\n\n\n\n\n::: {.cell}\n\n```\n## Error: bad 'data': object 'DF_mod_day' not found\n## Error: bad 'data': object 'DF_mod_day' not found\n## Error: bad 'data': object 'DF_mod_day' not found\n## Error: bad 'data': object 'DF_mod_day' not found\n## Error: bad 'data': object 'DF_mod_day' not found\n## Error: bad 'data': object 'DF_mod_day' not found\n## Error in ICtab(..., mnames = mnames, type = \"AIC\"): object 'm_day' not found\n```\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}