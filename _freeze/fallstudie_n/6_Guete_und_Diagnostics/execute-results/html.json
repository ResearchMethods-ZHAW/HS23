{
  "hash": "49d3f35381a3e40b19805228e7d54a8f",
  "result": {
    "markdown": "---\nexecute:\n  echo: false   # set to true to show musterlösung\n  output: false # set to true to show musterlösung\ncode-fold: true\ncode-summary: \"Musterlösung\"\nknitr:\n  opts_chunk: \n    collapse: true\n---\n\n\n# BiEc6_N Modellgüte und -diagnostics MM\n\n## Libraries laden\n\nPackages die wir für die Modelle und die Diagnostics brauchen\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nlibrary(\"lme4\")\nlibrary(\"bbmle\")\nlibrary(\"MuMIn\")\nlibrary(\"dplyr\")\nlibrary(\"readr\")\nlibrary(\"ggplot2\")\nlibrary(\"DHARMa\")\nlibrary(\"car\")\nlibrary(\"MASS\")\nlibrary(\"ROCR\")\nlibrary(\"sjPlot\")\nlibrary(\"ggeffects\")\nlibrary(\"sjstats\")\nlibrary(\"cowplot\")\nlibrary(\"gstat\")\n```\n:::\n\n\n## Ausgangslage\n\n- Der Modellfit aus Aufgabe 5 von letzter Woche dient als Ausgangspunkt für die heutigen Übungen. \n\nHier sollte investiert werden. Backscale Estimates, Modelldiagnostik aufmöbeln, \n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\nDF_mod_day <- read_delim(\"datasets/fallstudie_n/Aufgabe4_Datensatz_Habitatnutzung_Modelle_231027_moodle.csv\", delim = \";\") |>\n  filter(time_of_day == \"day\") |>\n  mutate(\n    slope_scaled = scale(slope),\n    topo_pos_scaled = scale(topo_pos),\n    us_scaled = scale(us_2014),\n    os_scaled = scale(os_2014),\n    forest_prop_scaled = scale(forest_prop),\n    dist_road_all_scaled = scale(dist_road_all),\n    dist_road_only_scaled = scale(dist_road_only),\n    dist_sett_scaled = scale(dist_sett),\n    remoteness_scaled = scale(remoteness),\n    id = as.factor(id)\n  )\n\nf <- pres_abs ~\n  slope_scaled +\n  us_scaled +\n  os_scaled +\n  forest_prop_scaled +\n  dist_road_only_scaled +\n  dist_sett_scaled +\n  remoteness_scaled\n\nf <- paste(c(f, \"+ (1 | id)\"), collapse = \" \") |> as.formula()\n\nm_day <- glmer(f, data = DF_mod_day, family = binomial, na.action = \"na.fail\")\n\nall_m <- dredge(m_day)\n\navgmodel <- model.avg(all_m, rank = \"AICc\", subset = delta < 2)\nsummary(avgmodel)\n```\n:::\n\n\n- Die Modellresultate aus dem avgmodel sind grundätzlich die finalen Resultate die bereits interpretiert werden könnten. Allerdings funktionieren die Diagnosetests und die Darstellung der Resultate mit diesem gemittelten Modell nicht sehr gut, weshalb wir einen re-fit mit glmer machen müssen (an den Resultaten ändert sich dadurch nichts) \n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\n# hier zum Vergleich, dass die Resulate sich nur marginal verändern\n\nsummary(avgmodel)\nsummary(m_day)\n```\n:::\n\n\n## Aufgabe 1\n\nBerechung der AUC (area under the receiver operating characteristic curve) **= Mass der Modellgüte**\n\nFür die Berechnung des AUC findet ihr weiterführende Informationen unter: [Link](https://www.wsl.ch/staff/niklaus.zimmermann/programs/progs/simtest.pdf) \n\n\n::: {.cell}\n\n:::\n\n\n## Aufgabe 2\n\nInterpretieren der Modell-Residuen mittels Tests auf verschiedene Aspekte\n\n- Model testing for over/underdispersion, zeroinflation and spatial autocorrelation following the DHARMa package.\n- unbedingt die Vignette des DHARMa-Package konsultieren: [Link](https://cran.r-project.org/web/packages/DHARMa/vignettes/DHARMa.html)\n\n\n::: {.cell}\n\n:::\n\n\n## Aufgabe 3\n\nGraphische Darstellung der Modellresultate\n\n\n::: {.cell}\n\n:::\n\n\n## Aufgabe 4\n\nErmittlung des individuellen Beitrags der einzelen Variablen im Gesamtmodell\n\n- Bestimmen delta AIC nach @coppes2017 → Vergleich des Gesamtmodells gegenüber einem Modell ohne die entsprechende Variable.\n- Auftrag auf nächste Woche: Kurze Vorstellung der Modellresultate & Diagnostics im Plenum und Diskussion der Ergebnisse (keine PP-Präsentation nötig)\n\n\n::: {.cell}\n\n```\n## Error in eval(predvars, data, env): Objekt 'dist_build_scaled' nicht gefunden\n## Error in eval(predvars, data, env): Objekt 'dist_build_scaled' nicht gefunden\n## Error in eval(predvars, data, env): Objekt 'dist_build_scaled' nicht gefunden\n## Error in eval(predvars, data, env): Objekt 'dist_build_scaled' nicht gefunden\n## Error in eval(predvars, data, env): Objekt 'dist_build_scaled' nicht gefunden\n## Error in eval(predvars, data, env): Objekt 'dist_build_scaled' nicht gefunden\n## Error in ICtab(..., mnames = mnames, type = \"AIC\"): Objekt 'm_os' nicht gefunden\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}